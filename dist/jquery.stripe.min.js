/**
	jQuery Plugin .stripe( options )
	@version  : 1.0.1
	@author   : Bruce Thomas
	@requires : jquery>=1.7.1
	@github   : https://github.com/fliptopbox/jquery.stripe
*/
(function(n){function t(t,o){this.element=t,this.options=n.extend({},e,o),this._defaults=e,this._name=i,this.init()}var i="stripe",e={ms:750,delay:1e4,automatic:!1,"min-width":10,buttons:null},o=null;t.prototype.init=function(){var t=n(this.element).addClass("stripe"),i=t.find("ul:first"),e=i.find("li"),a=e.length,u=this.options,s=function(n){return u[n]},r=s("ms"),d=0,h=null,c=s("delay"),l=c,f=s("automatic"),p=function(){var t=[];return n(e).each(function(){var i=n(this),e=i.find("img"),o=e.attr("src"),a=e.attr("alt")||"";t.push({src:o,alt:a})}),t}(),m=s("min-width"),v=t.width(),w=v-a*m,g=null,b=function(n,t){return t=t||1,Math.floor(Math.random()*n+t)},y=function(t){if(t="number"==typeof t?t:b(a),t=t>a-1?0:t,t=0>t?a-1:t,g===t)return y();g=t;var i=e.eq(t),o=i.siblings("li"),u=i.find("img"),s=(u.attr("src"),function(t){var e=t.width,u=e>=w?w:e,s=v-u,d=s/(a-1),h=t.alt,c=n("<div />").addClass("stripe-description").css({display:"none"}).html("<em>"+h.split(" - ").join("</em><em>")+"</em>");n(".stripe-description").remove(),o.animate({width:d},r,"swing"),i.animate({width:u},r,"swing",function(){i.append(c),setTimeout(function(){c.fadeIn(r)},0)})});return u.height(p[t].height).width(p[t].width),s(p[t]),g},x=function(n){return f?(l="number"==typeof n?n:l,h=h||setTimeout(function(){h=null,y(),x()},l-250),undefined):(console.log("automatic",f),undefined)},C=function(){clearTimeout(h),h=null},j=function(){x()},M=function(){return y(g+1)},T=function(){return y(g-1)},_=function(){if(s("buttons")){var i=n("<div />").addClass("stripe-control"),e='<a href="#" class="button"></a>',o=n(e).addClass("next").append("<span>next</span>"),a=n(e).addClass("previous").append("<span>prev</span>");i.append(a).append(o),t.append(i),i.on("click",".button",function(t){t.preventDefault();var i=n(this),e=i.hasClass("next");return e?M():T()}),i.on("mouseenter",C).on("mouseleave",j)}},k=function(){e.height(o);var t,i;n(p).each(function(n,e){t=e.width/e.height,i=o*t,p[n].width=i,p[n].height=o}),y(b(a)),x()};(function(){e.width(v/a),n(p).each(function(t,i){var e=new Image;e.onload=function(){return n.extend(p[t],{width:e.width,height:e.height}),o=Math.min(o||e.height,e.height),(d+=1)>=a?(_(),k(),undefined):undefined},e.src=i.src})})(),e.on("click",function(){var t=n(this).index();return t!==g?y(t):g}),t.on("mouseenter",C).on("mouseleave",j)},n.fn[i]=function(e){return e=e&&e.constructor===Object?e:{},this.each(function(){n.data(this,"plugin_"+i,new t(this,e))})}})(jQuery,window,document);