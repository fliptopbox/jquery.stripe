/**
	jQuery Plugin .stripe( options )
	@version  : 1.0.1
	@author   : Bruce Thomas
	@requires : jquery>=1.7.1
	@github   : https://github.com/fliptopbox/jquery.stripe
*/
(function(t){function i(i,s){var a=this;this.element=i,this.options=t.extend({},n,s),this._defaults=n,this._name=e,this.container=t(this.element).addClass("stripe"),this.ul=this.container.find("ul:first"),this.$li=this.ul.find("li"),this.imageTotal=this.$li.length,this.ms=this.getOption("ms"),this.loaded=0,this.timeout=null,this.defaultDelay=this.getOption("delay"),this.swipeDelay=this.defaultDelay,this.automatic=this.getOption("automatic"),this.images=function(){var i=[];return t(a.$li).each(function(){var e=t(this),n=e.find("img"),s=n.attr("src"),a=n.attr("alt")||"";i.push({src:s,alt:a})}),i}(),this.minStripeWidth=this.getOption("min-width"),this.totalWidth=this.container.width(),this.maxImageWidth=this.totalWidth-this.imageTotal*this.minStripeWidth,this.minHeight=null,this.current=null,this.init()}var e="stripe",n={ms:750,delay:1e4,automatic:!1,"min-width":10,buttons:null};i.prototype.auto=function(){var t=this;return this.automatic?(this.timeout=this.timeout||setTimeout(function(){t.timeout=null,t.getImage(),t.auto()},this.swipeDelay-250),undefined):(console.log("automatic",this.automatic),undefined)},i.prototype.getOption=function(t){return this.options[t]},i.prototype.random=function(t,i){return i=i||1,Math.floor(Math.random()*t+i)},i.prototype.onload=function(i,e,n){var s=this,a=i.width,h=a>=this.maxImageWidth?this.maxImageWidth:a,o=this.totalWidth-h,r=o/(this.imageTotal-1),u=i.alt,m=t("<div />").addClass("stripe-description").css({display:"none"}).html("<em>"+u.split(" - ").join("</em><em>")+"</em>");t(".stripe-description").remove(),n.animate({width:r},this.ms,"swing"),e.animate({width:h},this.ms,"swing",function(){e.append(m),setTimeout(function(){m.fadeIn(s.ms)},0)})},i.prototype.getImage=function(t){if(t="number"==typeof t?t:this.random(this.imageTotal),t=t>this.imageTotal-1?0:t,t=0>t?this.imageTotal-1:t,this.current===t)return this.getImage();this.current=t;var i=this.$li.eq(t),e=i.siblings("li"),n=i.find("img");return n.attr("src"),n.height(this.images[t].height).width(this.images[t].width),this.onload(this.images[t],i,e),this.current},i.prototype.enter=function(){clearTimeout(this.timeout),this.timeout=null},i.prototype.exit=function(){this.auto()},i.prototype.next=function(){return this.getImage(this.current+1)},i.prototype.previous=function(){return this.getImage(this.current-1)},i.prototype.insertNavigationCtrl=function(){if(this.getOption("buttons")){var i=t("<div />").addClass("stripe-control"),e='<a href="#" class="button"></a>',n=t(e).addClass("next").append("<span>next</span>"),s=t(e).addClass("previous").append("<span>prev</span>"),a=this;i.append(s).append(n),this.container.append(i),i.on("click",".button",function(i){i.preventDefault();var e=t(this),n=e.hasClass("next");return n?a.next():a.previous()}),i.on("mouseenter",function(){a.enter.apply(a)}).on("mouseleave",function(){a.exit.apply(a)})}},i.prototype.conformHeights=function(){var i,e,n=this;this.$li.height(this.minHeight),t(this.images).each(function(t,s){i=s.width/s.height,e=n.minHeight*i,n.images[t].width=e,n.images[t].height=n.minHeight}),this.getImage(this.random(this.imageTotal)),this.auto()},i.prototype.init=function(){var i=this;this.$li.width(this.totalWidth/this.imageTotal),t(this.images).each(function(e,n){var s=new Image;s.onload=function(){return t.extend(i.images[e],{width:s.width,height:s.height}),i.minHeight=Math.min(i.minHeight||s.height,s.height),(i.loaded+=1)>=i.imageTotal?(i.insertNavigationCtrl(),i.conformHeights(),undefined):undefined},s.src=n.src}),this.$li.on("click",function(){var e=t(this).index();return e!==i.current?i.getImage(e):i.current}),this.container.on("mouseenter",function(){i.enter.apply(i)}).on("mouseleave",function(){i.exit.apply(i)})},t.fn[e]=function(n){return n=n&&n.constructor===Object?n:{},this.each(function(){t.data(this,"plugin_"+e,new i(this,n))})}})(jQuery,window,document);